<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>TruckStore Test</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin="" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <style>
  body {
    padding: 0;
    margin: 0;
}
html, body, #map {
    height: 100%;
    width: 100vw;
}
  </style>

  </head>
  <body>

    <div id="truckstore-map" style="height: 800px;"></div>

    <div id="mapid"style="height: 1px;"></div>



    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==" crossorigin=""></script>
    <!-- <script src="js.js"></script> -->
    <script>
    // Available map styles:
    // mapbox.streets
    // mapbox.light
    // mapbox.dark
    // mapbox.satellite
    // mapbox.streets-satellite
    // mapbox.wheatpaste
    // mapbox.streets-basic
    // mapbox.comic
    // mapbox.outdoors
    // mapbox.run-bike-hike
    // mapbox.pencil
    // mapbox.pirates
    // mapbox.emerald
    // mapbox.high-contrast



    // leaflet howto:
    // https://leafletjs.com/examples/quick-start/
    // initialize map
    //var leafletTruckStoreMap = L.map('truckstore-map').setView([mylatitude, mylongitude], 13);
    var leafletTruckStoreMap = L.map('truckstore-map').setView([48.675592, 9.366319], 18);
    // add imagery and tile layers to map
    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
     attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
     maxZoom: 25,
     id: 'mapbox.streets-satellite',
     accessToken: 'pk.eyJ1IjoiZGVyc2Nobml0dGVyIiwiYSI6ImNqbm9seWh0bjI4bnYzdnRhbXl5aGw3b2wifQ.mkwyeefhBhhVprtNilwYRg'
    }).addTo(leafletTruckStoreMap);

    var marker = L.marker([48.675592, 9.366319]).addTo(leafletTruckStoreMap);

    var parkzone1 = L.polygon([
        [48.675348551664776,9.364394603883284],
        [48.674421783797875,9.364772795354384],
        [48.67452197574053,9.365435300981062],
        [48.67529845654027,9.364960549985426],
        [48.675553941154504,9.364839850579756]

    ]).addTo(leafletTruckStoreMap);
    parkzone1.setStyle({color: 'red',fillColor: '#DC143C'});

    var parkzone2 = L.polygon([
        [48.675483808252125,9.365979789411085],
        [48.67561906447636,9.366830049668806],
        [48.675253370885606,9.367025850926893],
        [48.67510809461282,9.366175590669172]

    ]).addTo(leafletTruckStoreMap);
    parkzone2.setStyle({fillColor: '#32CD32'});

    marker.bindPopup("<b>Aktueller Standort</b><br>",{ autoClose: false }).openPopup();
    parkzone1.bindPopup("Parkzone 1",{ autoClose: false }).openPopup();
    parkzone2.bindPopup("Parkzone 2",{ autoClose: false }).openPopup();

    // var popup = L.popup()
    //     .setLatLng([48.676015, 9.365819])
    //     .setContent("I am a standalone popup.")
    //     .addTo(leafletTruckStoreMap);

    function onLocationFound(e) {
        var radius = e.accuracy;

        L.marker(e.latlng).addTo(leafletTruckStoreMap)
            .bindPopup("You are within " + radius + " meters from this point").openPopup();

        L.circle(e.latlng, radius).addTo(leafletTruckStoreMap);
    }

    leafletTruckStoreMap.on('locationfound', onLocationFound);




    // setup geolocation test map
    var map = L.map('mapid').setView([48.675592, 9.366319], 5);
    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
     attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
     maxZoom: 25,
     id: 'mapbox.streets-satellite',
     accessToken: 'pk.eyJ1IjoiZGVyc2Nobml0dGVyIiwiYSI6ImNqbm9seWh0bjI4bnYzdnRhbXl5aGw3b2wifQ.mkwyeefhBhhVprtNilwYRg'
    }).addTo(map);
    // map.locate({setView: true, maxZoom: 25});


    // function onLocationFound(e) {
    //     var radius = e.accuracy;
    //
    //     L.marker(e.latlng).addTo(map)
    //         .bindPopup("You are within " + radius + " meters from this point").openPopup();
    //
    //     L.circle(e.latlng, radius).addTo(map);
    // }
    // map.on('locationfound', onLocationFound);
    //
    //
    // function onLocationError(e) {
    //     alert(e.message);
    // }
    // map.on('locationerror', onLocationError);

    </script>


</script>
    </body>
</html>
